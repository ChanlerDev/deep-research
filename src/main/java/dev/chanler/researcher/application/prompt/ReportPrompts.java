package dev.chanler.researcher.application.prompt;

import org.springframework.stereotype.Component;

/**
 * Prompts for report agent
 * @author: Chanler
 */
@Component
public class ReportPrompts {
    public final static String REPORT_AGENT_PROMPT = """
            基于所有已完成的研究，请针对总体研究简报撰写一份全面、结构良好的答案：
            <Research Brief>
            {research_brief}
            </Research Brief>

            重点：确保答案使用与人类消息相同的语言！
            例如，如果用户消息为英文，则务必用英文撰写回复；如果用户消息为中文，则务必用中文撰写。
            这是关键。如果语言不一致，用户将无法理解你的答案。

            今天的日期是 {date}。

            以下是你所完成研究的发现：
            <Findings>
            {findings}
            </Findings>

            请创建一份详尽的报告，满足以下要求：
            1. 使用恰当的标题结构（标题使用 #，章节使用 ##，小节使用 ###）。
            2. 引入研究中的具体事实与洞见。
            3. 使用 [标题](URL) 的格式引用相关来源。
            4. 提供平衡且深入的分析。尽可能全面，包含所有与总体研究问题相关的信息。用户期望获得深入详实的研究报告。
            5. 在末尾包含“Sources”部分，并列出全部引用链接。

            报告可以采用多种结构。以下是一些示例：

            若需比较两件事物，可按以下方式组织：
            1/ 引言
            2/ 主题 A 概述
            3/ 主题 B 概述
            4/ A 与 B 的比较
            5/ 结论

            若用户要求返回列表，可以采用单一章节列出全部项目：
            1/ 项目列表或表格
            也可以为列表中的每个项目单独创建章节。列举时可省略引言或结论。
            1/ 项目 1
            2/ 项目 2
            3/ 项目 3

            若用户要求总结、报告或概览，可采用如下结构：
            1/ 主题概述
            2/ 概念 1
            3/ 概念 2
            4/ 概念 3
            5/ 结论

            如果你认为只需单个章节即可回答问题，也完全可以：
            1/ 回答

            请记住：章节结构极为灵活。你可以根据需要自由组织，只要有助于读者理解即可。

            每个章节请遵循以下规范：
            - 使用简洁、清晰的语言。
            - 章节标题使用 Markdown 中的 ##。
            - 切勿在报告中提及“我”或其他自指语句。报告应保持专业口吻。
            - 不要描述你正在做什么。直接给出内容即可。
            - 每个章节应尽可能详细，充分利用已收集的信息。深度研究报告通常较长且详尽。
            - 适当时可使用项目符号列出信息，但默认使用段落形式。

            重要提示：
            - 研究简报和研究内容可能为英文，但在撰写最终答案时，请转换为用户的语言。
            - 确保最终报告与消息历史中的人类语言完全一致。

            请使用清晰的 Markdown 结构排版，并在适当位置添加来源引用。

            <Citation Rules>
            - 为每个唯一 URL 分配一个引用编号。
            - 末尾添加 ### Sources 并按顺序列出所有来源。
            - 重要：无论引用哪些来源，最终列表需按 1,2,3,4… 顺序连续编号。
            - 每个来源需单独换行，以便在 Markdown 中渲染为列表。
            - 示例格式：
            [1] Source Title: URL
            [2] Source Title: URL
            - 引用极其重要。务必包含它们，并确保准确无误。用户常会根据引用进一步查阅信息。
            </Citation Rules>
            """;
}
